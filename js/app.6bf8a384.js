(function(){"use strict";var e={156:function(e,t,s){s(260);var o=s(768),a=s(908);s(224);o["default"].use(a.cp3);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"app"}},[s("app-menu"),s("div",{staticClass:"container"},[s("router-view")],1),s("br"),s("app-footer")],1)},l=[],r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"primary"}},[s("b-navbar-brand",[e._v("Movie ticket booking")]),s("b-navbar-toggle",{attrs:{target:"nav-collapse"}}),s("b-collapse",{attrs:{id:"nav-collapse","is-nav":""}},[s("b-navbar-nav",[s("router-link",{attrs:{tag:"b-nav-item",to:"booking","active-class":"active",exact:""}},[e._v("Book now")]),s("router-link",{attrs:{tag:"b-nav-item",to:"sales","active-class":"active",exact:""}},[e._v("Sales")])],1)],1)],1)],1)},n=[],c={},d=c,b=s(528),u=(0,b.c)(d,r,n,!1,null,null,null),h=u.exports,f=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("footer",[s("hr"),s("div",{staticClass:"container"},[e._v(" "+e._s(e.copyrightData)+" ")]),s("br")])},p=[],k={data(){return{copyrightData:"© Copyright, 2019. Kaustubh Ghodke"}}},v=k,m=(0,b.c)(v,f,p,!1,null,null,null),g=m.exports,C={name:"app",components:{appMenu:h,appFooter:g}},_=C,w=(0,b.c)(_,i,l,!1,null,null,null),S=w.exports,y=s(408),x=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("br"),s("h1",{staticClass:"display-3"},[e._v("Book tickets")]),s("br"),e.bookingDone?e._e():s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("app-shows",{on:{showSeats:function(t){return e.showSeats(t)}}})],1)]),s("br"),e.hideSeats?e._e():s("div",{staticClass:"row"},[s("div",{staticClass:"col-sm-12"},[s("app-seats",{key:e.componentKey,attrs:{showNumber:e.showNumber}})],1)])])},B=[],T=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.showHelpMsg?s("b-alert",{attrs:{show:"",variant:"primary",fade:""}},[e._v("Please select a show to see the available seats")]):e._e(),s("div",{staticClass:"row"},e._l(e.showsList,(function(t,o){return s("div",{key:o,staticClass:"col-sm-12 col-md-4",on:{click:function(t){return e.viewSeats(o)}}},[s("b-card",{staticClass:"mb-2",class:{"active-show":e.selectedShow===o},attrs:{"img-top":"",tag:"article","img-src":t.img,"img-alt":t.title+" poster",title:t.name}},[s("b-card-text",[e._v(e._s(t.desc))])],1)],1)})),0)],1)},D=[],A=JSON.parse('[{"name":"Show 1","desc":"This is the description of Show 1","img":"https://images.unsplash.com/photo-1478720568477-152d9b164e26?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"},{"name":"Show 2","desc":"This is the description of Show 2","img":"https://images.unsplash.com/photo-1535016120720-40c646be5580?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"},{"name":"Show 3","desc":"This is the description of Show 3","img":"https://images.unsplash.com/photo-1542204625-ca960ca44635?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=500&q=60"}]'),N={data(){return{showsList:A,selectedShow:null,showHelpMsg:!0}},methods:{viewSeats(e){this.showHelpMsg=!1,this.selectedShow=e,this.$emit("showSeats",e)}}},P=N,O=(0,b.c)(P,T,D,!1,null,"ce4059de",null),$=O.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[e.bookingDone?e._e():s("div",{staticClass:"seat-selection"},[s("b-list-group",[s("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center"},[s("b-form-group",{attrs:{label:"Platinum (₹"+e.platinumCost+")"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox-group-1",name:"platinum"},model:{value:e.selectedPlatinum,callback:function(t){e.selectedPlatinum=t},expression:"selectedPlatinum"}},e._l(e.optionsPlatinum,(function(t){return s("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:t.seat,class:{"unavailable-seat":t.empty},attrs:{value:t.seat,disabled:t.booked,title:t.booked?"This seat is already booked":null}},[e._v(e._s(t.seat))])})),1)],1),s("b-badge",{attrs:{variant:"primary",pill:""}},[e._v(e._s(e.selectedPlatinum.length))])],1),s("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center"},[s("b-form-group",{attrs:{label:"Gold (₹"+e.goldCost+")"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox-group-2",name:"gold"},model:{value:e.selectedGold,callback:function(t){e.selectedGold=t},expression:"selectedGold"}},e._l(e.optionsGold,(function(t){return s("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:t.seat,class:{"unavailable-seat":t.empty},attrs:{value:t.seat,disabled:t.booked,title:t.booked?"This seat is already booked":null}},[e._v(e._s(t.seat))])})),1)],1),s("b-badge",{attrs:{variant:"primary",pill:""}},[e._v(e._s(e.selectedGold.length))])],1),s("b-list-group-item",{staticClass:"d-flex justify-content-between align-items-center"},[s("b-form-group",{attrs:{label:"Silver (₹"+e.silverCost+")"}},[s("b-form-checkbox-group",{attrs:{id:"checkbox-group-3",name:"silver"},model:{value:e.selectedSilver,callback:function(t){e.selectedSilver=t},expression:"selectedSilver"}},e._l(e.optionsSilver,(function(t){return s("b-form-checkbox",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover",modifiers:{hover:!0}}],key:t.seat,class:{"unavailable-seat":t.empty},attrs:{value:t.seat,disabled:t.booked,title:t.booked?"This seat is already booked":null}},[e._v(e._s(t.seat))])})),1)],1),s("b-badge",{attrs:{variant:"primary",pill:""}},[e._v(e._s(e.selectedSilver.length))])],1)],1),s("br"),s("b-alert",{attrs:{show:"",variant:"warning"}},[e._v("Please note that all the bookings would be charged a service tax of 14% along with Swachh Bharat Cess and Krishi Kalyan Cess at a rate of 0.5% each.")]),s("b-button",{staticClass:"float-right",attrs:{variant:"primary",disabled:0===e.totalTickets},on:{click:e.bookTickets}},[e._v(" Book tickets "),0!==e.totalTickets?s("b-badge",{attrs:{variant:"light"}},[e._v(e._s(e.totalTickets))]):e._e()],1),s("br"),s("br")],1),e.bookingDone?s("b-alert",{attrs:{show:"",variant:"success"}},[s("h4",{staticClass:"alert-heading"},[e._v("Booking successful for 'Show "+e._s(e.showNumber+1)+"'")]),s("hr"),s("p",[e._v("Here are the details of your booking:")]),s("div",[e._v(" Seats selected: "),s("ul",[0!==e.selectedPlatinum.length?s("li",[e._v(" Platinum: "),s("strong",[e._v(e._s(e.selectedPlatinum.join(", ")))])]):e._e(),0!==e.selectedGold.length?s("li",[e._v(" Gold: "),s("strong",[e._v(e._s(e.selectedGold.join(", ")))])]):e._e(),0!==e.selectedSilver.length?s("li",[e._v(" Silver: "),s("strong",[e._v(e._s(e.selectedSilver.join(", ")))])]):e._e()])]),s("div",[e._v(" Cost incurred: "),s("ul",[s("li",{attrs:{id:"total"}},[e._v("SubTotal: ₹"+e._s(e.cost.subTotal))]),s("li",{attrs:{id:"tax"}},[e._v("Service Tax @14%: ₹"+e._s(e.cost.tax))]),s("li",{attrs:{id:"sbCess"}},[e._v("Swachh Bharat Cess @0.5%: ₹"+e._s(e.cost.sbCess))]),s("li",{attrs:{id:"kkCess"}},[e._v("Krishi Kalyan Cess @0.5%: ₹"+e._s(e.cost.kkCess))]),s("li",{attrs:{id:"net"}},[s("strong",[e._v("Total: ₹"+e._s(e.cost.total))])])])])]):e._e(),e.bookingDone&&!e.stoppedRedirect?s("b-alert",{attrs:{show:"",fade:"",variant:"warning"}},[e._v(' You will be redirected to the "Sales" page in '+e._s(e.timer)+" seconds. "),s("a",{staticClass:"alert-link",attrs:{href:""},on:{click:function(t){return t.preventDefault(),e.stopRedirection(t)}}},[e._v("Click here to cancel redirection")])]):e._e(),e.stoppedRedirect?s("b-button",{staticClass:"float-right",attrs:{variant:"primary"}},[s("router-link",{attrs:{tag:"span",to:"sales"}},[e._v("Go to Sales page")])],1):e._e()],1)},G=[],R={data(){return{selectedPlatinum:[],selectedGold:[],selectedSilver:[],platinumCost:320,goldCost:280,silverCost:240,taxRate:.14,sbCessRate:.005,kkCessRate:.005,stoppedRedirect:!1,timerInterval:null,timer:30,cost:{subTotal:0,tax:0,sbCess:0,kkCess:0,total:0}}},props:["showNumber"],computed:{optionsPlatinum(){return this.$store.getters.getSeatsData[this.showNumber][0].platinum},optionsGold(){return this.$store.getters.getSeatsData[this.showNumber][1].gold},optionsSilver(){return this.$store.getters.getSeatsData[this.showNumber][2].silver},totalTickets(){return this.selectedPlatinum.length+this.selectedGold.length+this.selectedSilver.length},bookingDone(){return this.$store.getters.getBookingStatus}},methods:{bookTickets(){this.calculateCost(),this.blockSeats(),this.startTimer()},calculateCost(){this.cost.subTotal=this.selectedPlatinum.length*this.platinumCost+this.selectedGold.length*this.goldCost+this.selectedSilver.length*this.silverCost,this.cost.tax=+(this.cost.subTotal*this.taxRate).toFixed(2),this.cost.sbCess=+(this.cost.subTotal*this.sbCessRate).toFixed(2),this.cost.kkCess=+(this.cost.subTotal*this.kkCessRate).toFixed(2),this.cost.total=+(this.cost.subTotal+this.cost.tax+this.cost.sbCess+this.cost.kkCess).toFixed(2)},blockSeats(){this.$store.dispatch("blockSeats",{showNumber:this.showNumber,platinum:this.selectedPlatinum,gold:this.selectedGold,silver:this.selectedSilver,bookingStatus:!0,cost:this.cost})},stopRedirection(){this.stoppedRedirect=!0,clearInterval(this.timerInterval)},startTimer(){this.timerInterval=setInterval((()=>{this.timer--}),1e3)}},watch:{timer(e){0===e&&(clearInterval(this.timerInterval),this.$router.push({name:"sales"}))}}},K=R,E=(0,b.c)(K,j,G,!1,null,"b7d8cc1e",null),M=E.exports,F={data(){return{hideSeats:!0,showNumber:0,componentKey:0}},computed:{bookingDone(){return this.$store.getters.getBookingStatus}},methods:{showSeats(e){e!==this.showNumber&&this.componentKey++,this.hideSeats=!1,this.showNumber=e}},components:{appShows:$,appSeats:M},beforeCreate(){this.$store.dispatch("bookingDone",!1)}},H=F,I=(0,b.c)(H,x,B,!1,null,null,null),J=I.exports,q=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("br"),s("h1",{staticClass:"display-3"},[e._v("Total sales")]),s("br"),s("br"),s("b-table",{attrs:{outlined:"",items:e.financialData}}),s("b-button",{staticClass:"float-right",attrs:{variant:"primary"}},[s("router-link",{attrs:{tag:"span",to:"booking"}},[e._v("Make another booking")])],1),s("br")],1)},Q=[],W={computed:{financialData(){const e=this.$store.getters.getTotalCost,t=[{type:"Revenue",amount:e.revenue,description:"Total revenue generated by bookings today"},{type:"Service tax",amount:e.tax,description:"14% service tax paid to the government"},{type:"Swachh Bharat Cess",amount:e.sbCess,description:"0.5% Swachh Bharat Cess paid to the government"},{type:"Krishi Kalyan Cess",amount:e.kkCess,description:"0.5% Krishi Kalyan Cess paid to the government"}];return t}}},L=W,Y=(0,b.c)(L,q,Q,!1,null,null,null),z=Y.exports;o["default"].use(y.cp);var U=new y.cp({mode:"history",base:"/movie-booking-app-v1/",routes:[{path:"/booking",name:"booking",component:J},{path:"/sales",name:"sales",component:z},{path:"*",redirect:"/booking"}]}),V=s(416),X=JSON.parse('[[{"platinum":[{"seat":"A1","booked":false},{"seat":"A2","booked":false},{"seat":"A3","booked":false},{"seat":"A4","booked":false},{"seat":"A5","booked":false},{"seat":"A6","booked":false},{"seat":"A7","booked":false},{"seat":"A8","booked":false},{"seat":"A9","booked":false}]},{"gold":[{"seat":"B1","booked":false},{"seat":"B2","booked":false},{"seat":"B3","booked":false},{"seat":"B4","booked":false},{"seat":"B5","booked":false},{"seat":"B6","booked":false}]},{"silver":[{"seat":"C1","booked":false,"empty":true},{"seat":"C2","booked":false},{"seat":"C3","booked":false},{"seat":"C4","booked":false},{"seat":"C5","booked":false},{"seat":"C6","booked":false},{"seat":"C7","booked":false}]}],[{"platinum":[{"seat":"A1","booked":false},{"seat":"A2","booked":false},{"seat":"A3","booked":false},{"seat":"A4","booked":false},{"seat":"A5","booked":false},{"seat":"A6","booked":false},{"seat":"A7","booked":false}]},{"gold":[{"seat":"B1","booked":false,"empty":true},{"seat":"B2","booked":false},{"seat":"B3","booked":false},{"seat":"B4","booked":false},{"seat":"B5","booked":false},{"seat":"B6","booked":false}]},{"silver":[{"seat":"C1","booked":false},{"seat":"C2","booked":false},{"seat":"C3","booked":false},{"seat":"C4","booked":false},{"seat":"C5","booked":false},{"seat":"C6","booked":false},{"seat":"C7","booked":false}]}],[{"platinum":[{"seat":"A1","booked":false},{"seat":"A2","booked":false},{"seat":"A3","booked":false},{"seat":"A4","booked":false},{"seat":"A5","booked":false}]},{"gold":[{"seat":"B1","booked":false},{"seat":"B2","booked":false},{"seat":"B3","booked":false},{"seat":"B4","booked":false},{"seat":"B5","booked":false},{"seat":"B6","booked":false},{"seat":"B7","booked":false},{"seat":"B8","booked":false}]},{"silver":[{"seat":"C1","booked":false,"empty":true},{"seat":"C2","booked":false},{"seat":"C3","booked":false},{"seat":"C4","booked":false},{"seat":"C5","booked":false},{"seat":"C6","booked":false},{"seat":"C7","booked":false},{"seat":"C8","booked":false},{"seat":"C9","booked":false}]}]]');o["default"].use(V.cp);var Z=new V.cp.Store({state:{bookingStatus:!1,seatsData:X,totalCost:{revenue:0,tax:0,sbCess:0,kkCess:0}},getters:{getBookingStatus(e){return e.bookingStatus},getSeatsData(e){return e.seatsData},getTotalCost(e){return e.totalCost}},mutations:{bookSeats(e,t){for(const s of t.platinum)for(const o of e.seatsData[t.showNumber][0].platinum)if(s===o.seat){o.booked=!0;break}for(const s of t.gold)for(const o of e.seatsData[t.showNumber][1].gold)if(s===o.seat){o.booked=!0;break}for(const s of t.silver)for(const o of e.seatsData[t.showNumber][2].silver)if(s===o.seat){o.booked=!0;break}e.totalCost.revenue+=+t.cost.subTotal.toFixed(2),e.totalCost.tax+=+t.cost.tax.toFixed(2),e.totalCost.sbCess+=+t.cost.sbCess.toFixed(2),e.totalCost.kkCess+=+t.cost.kkCess.toFixed(2)},bookingDone(e,t){e.bookingStatus=t}},actions:{blockSeats({dispatch:e,commit:t},s){t("bookSeats",s),e("bookingDone",s.bookingStatus)},bookingDone({commit:e},t){e("bookingDone",t)}}});o["default"].config.productionTip=!1,new o["default"]({router:U,store:Z,render:e=>e(S)}).$mount("#app")}},t={};function s(o){var a=t[o];if(void 0!==a)return a.exports;var i=t[o]={exports:{}};return e[o](i,i.exports,s),i.exports}s.m=e,function(){var e=[];s.O=function(t,o,a,i){if(!o){var l=1/0;for(d=0;d<e.length;d++){o=e[d][0],a=e[d][1],i=e[d][2];for(var r=!0,n=0;n<o.length;n++)(!1&i||l>=i)&&Object.keys(s.O).every((function(e){return s.O[e](o[n])}))?o.splice(n--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[o,a,i]}}(),function(){s.d=function(e,t){for(var o in t)s.o(t,o)&&!s.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};s.O.j=function(t){return 0===e[t]};var t=function(t,o){var a,i,l=o[0],r=o[1],n=o[2],c=0;if(l.some((function(t){return 0!==e[t]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(n)var d=n(s)}for(t&&t(o);c<l.length;c++)i=l[c],s.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return s.O(d)},o=self["webpackChunkmovie_booking_app"]=self["webpackChunkmovie_booking_app"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=s.O(void 0,[999],(function(){return s(156)}));o=s.O(o)})();
//# sourceMappingURL=app.6bf8a384.js.map